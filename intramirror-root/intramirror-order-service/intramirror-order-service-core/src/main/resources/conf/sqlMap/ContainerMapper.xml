<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.intramirror.order.core.mapper.ContainerMapper" >

   	<resultMap id="BaseResultMap" type="com.intramirror.order.api.model.Container" >
	    <id column="container_id" property="containerId" jdbcType="BIGINT" />
	    <result column="container_type" property="containerType" jdbcType="VARCHAR" />
	    <result column="ship_to_geography" property="shipToGeography" jdbcType="VARCHAR" />
	    <result column="status" property="status" jdbcType="INTEGER" />
	    <result column="height" property="height" jdbcType="BIGINT" />
	    <result column="width" property="width" jdbcType="BIGINT" />
	    <result column="length" property="length" jdbcType="BIGINT" />
	    <result column="weight" property="weight" jdbcType="DECIMAL" />
	    <result column="barcode" property="barcode" jdbcType="VARCHAR" />
	    <result column="created_at" property="createdAt" jdbcType="TIMESTAMP" />
	    <result column="updated_at" property="updatedAt" jdbcType="TIMESTAMP" />
	    <result column="shipment_id" property="shipmentId" jdbcType="BIGINT" />
  	</resultMap>
	
	<insert id="saveContainerByShipment" parameterType="com.intramirror.order.api.model.Container">
   insert into container(container_type,ship_to_geography,status,height,width,length,weight,barcode,created_at,updated_at,shipment_id)
values(#{containerType,jdbcType=VARCHAR}, #{shipToGeography,jdbcType=VARCHAR},#{status,jdbcType=INTEGER}, #{height,jdbcType=BIGINT},#{width,jdbcType=BIGINT}, #{length,jdbcType=BIGINT}, #{weight,jdbcType=DECIMAL},#{barcode,jdbcType=VARCHAR},#{createdAt,jdbcType=TIMESTAMP}, #{updatedAt,jdbcType=TIMESTAMP},#{shipmentId,jdbcType=BIGINT})
  	</insert>
  
  
	<update id="updateContainerByBarcode"  parameterType="com.intramirror.order.api.model.Container" >
		UPDATE container
		<trim prefix="set" suffixOverrides=","  suffix=" WHERE barcode = #{barcode,jdbcType=VARCHAR} ">
			<if test="length != null" >
			 length =  #{length,jdbcType=BIGINT},
			</if>
			<if test="width != null" >
			width =   #{width,jdbcType=DECIMAL},
			</if>
			<if test="height != null" >
			height =   #{height,jdbcType=BIGINT},
			</if>
		</trim>
  	</update>
  
  <select id="selectContainerByBarcode" resultMap="BaseResultMap" parameterType="java.util.Map" >
  		select * from container
		where barcode =  #{barcode,jdbcType=VARCHAR} and status = #{status,jdbcType=INTEGER}
  </select>
  
  <update id="updateContainerBystatus" parameterType="com.intramirror.order.api.model.Container">
  	UPDATE container
		<trim prefix="set" suffixOverrides=","  suffix=" WHERE barcode = #{barcode,jdbcType=VARCHAR} ">
			<if test="status != null" >
			 status =  #{status,jdbcType=BIGINT},
			</if>
		</trim>
  </update>
  
  <delete id="deleteContainerById" parameterType="java.util.Map">
  		DELETE FROM container 
		WHERE container_id = #{containerId,jdbcType=BIGINT}
  </delete>
</mapper>