<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.intramirror.user.core.mapper.VendorApplicationMapper">
    <resultMap id="BaseResultMap" type="com.intramirror.user.api.model.VendorApplication">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="vendor_application_id" jdbcType="BIGINT" property="vendorApplicationId"/>
        <result column="user_id" jdbcType="BIGINT" property="userId"/>
        <result column="vendor_id" jdbcType="BIGINT" property="vendorId"/>
        <result column="vendor_name" jdbcType="VARCHAR" property="vendorName"/>
        <result column="telephone" jdbcType="VARCHAR" property="telephone"/>
        <result column="contact_person_name" jdbcType="VARCHAR" property="contactPersonName"/>
        <result column="identity_card" jdbcType="VARCHAR" property="identityCard"/>
        <result column="category_ids" jdbcType="VARCHAR" property="categoryIds"/>
        <result column="brand_type" jdbcType="TINYINT" property="brandType"/>
        <result column="company_name" jdbcType="VARCHAR" property="companyName"/>
        <result column="registered_person" jdbcType="VARCHAR" property="registeredPerson"/>
        <result column="electronic_identification_card" jdbcType="VARCHAR" property="electronicIdentificationCard"/>
        <result column="operate_user_id" jdbcType="BIGINT" property="operateUserId"/>
        <result column="business_license_number" jdbcType="VARCHAR" property="businessLicenseNumber"/>
        <result column="business_license_duration" jdbcType="TIMESTAMP" property="businessLicenseDuration"/>
        <result column="valid_end_at" jdbcType="TIMESTAMP" property="validEndAt"/>
        <result column="electronic_business_license" jdbcType="VARCHAR" property="electronicBusinessLicense"/>
        <result column="legal_management_scope" jdbcType="VARCHAR" property="legalManagementScope"/>
        <result column="business_license_location" jdbcType="VARCHAR" property="businessLicenseLocation"/>
        <result column="created_at" jdbcType="TIMESTAMP" property="createdAt"/>
        <result column="updated_at" jdbcType="TIMESTAMP" property="updatedAt"/>
        <result column="enabled" jdbcType="BIT" property="enabled"/>
        <result column="status" jdbcType="INTEGER" property="status"/>
        <result column="result_status" jdbcType="VARCHAR" property="resultStatus"/>
        <result column="reason" jdbcType="VARCHAR" property="reason"/>
        <result column="brand_ids" jdbcType="VARCHAR" property="brandIds"/>
        <result column="step" jdbcType="TINYINT" property="step"/>
        <result column="national_mark" jdbcType="VARCHAR" property="nationalMark"/>
    </resultMap>

    <sql id="selectColumn">
    vendor_application_id, user_id, vendor_id, vendor_name, telephone, contact_person_name,
    identity_card, category_ids, brand_type, company_name, registered_person, electronic_identification_card, 
    operate_user_id, business_license_number, business_license_duration, valid_end_at, 
    electronic_business_license, legal_management_scope, business_license_location, created_at, 
    updated_at, enabled, status, result_status, reason, brand_ids, step, national_mark
  </sql>

    <sql id="selectTable">
        vendor_application va
    </sql>

    <select id="getVendorApplicationListByUserIdAndEnabled" resultMap="BaseResultMap">
        SELECT
        <include refid="selectColumn"/>
        FROM
        <include refid="selectTable"/>
        WHERE
        va.user_id =#{userId}
        AND
        va.enabled=#{enabled}
    </select>
</mapper>